Popover={registerPopover:function(){$(".popover").popover({container:"body"});$("[data-toggle='popover']").popover().on("shown.bs.popover",function(){var n=$(this);(n.attr("data-loaded")==undefined||n.attr("data-loaded")==""||n.attr("data-loaded")=="false")&&(n.attr("data-loading")==undefined||n.attr("data-loaded")==""||n.attr("data-loading")=="false")&&(n.attr("data-loading","true"),n.attr("data-type")=="company"&&Popover.getCompanySummary(n))});$("[data-toggle='popover']").on("mouseenter click",function(){$(".popover").each(function(){$("[aria-describedby='"+$(this).attr("id")+"']").popover("destroy")});var n=$(this);n.popover("show");$(".popover").on("mouseleave",function(){n.popover("hide")})})},getDataList:function(n){var t={};return n=="news"?(t.ltp=!0,t.eps=!0,t.dividend=!0):(n="portfolio")&&(t.ltp=!1,t.eps=!0,t.dividend=!0),t},dismissPopover:function(n){$("[aria-describedby='"+$(n).closest(".popover").attr("id")+"']").popover("destroy")},getCompanySummary:function(n){var t=n.attr("data-symbol");t==""&&n.popover("hide");$.ajax({url:"/handlers/webrequesthandler.ashx?type=get_company_summary",type:"GET",data:{symbol:t},dataType:"json",success:function(i){var s,e;if(i!=null){var u=Popover.getDataList(n.attr("data-company-display")),o=i.name+" ("+i.symbol+")",f="",r="";u.ltp==!0&&(f=i.percentChange>0?"text-increase":i.percentChange<0?"text-decrease":"",r="<div class='"+f+"'>",r+="<h3 style='margin-top:0px;'>"+(i.ltp==0?"":formatNumber(i.ltp,2,!1))+(i.percentChange=" <small class='"+f+"'>"+formatNumber(i.percentChange,4,!0)+"%<\/small>")+"<\/h3>",r+="<\/div>");r+="<table class='table table-striped table-hover table-condensed table-small '>";u.ltp==!0&&(r+="<tr><th>Last Traded On<\/th><td class='text-primary'>"+i.tradeDate+"<\/td><\/tr>",r+="<tr><th>52 Weeks<\/th><td>"+(i.fiftyTwoLow==0?"":formatNumber(i.fiftyTwoLow,2,!1))+" - "+(i.fiftyTwoHigh==0?"":formatNumber(i.fiftyTwoHigh,2,!1))+"<\/td><\/tr>",r+="<tr><th>180 Days Avg.<\/th><td>"+(i.oneEightyAvg==0?"":formatNumber(i.oneEightyAvg,2,!1))+"<\/td><\/tr>",r+="<tr><th>1 Year Yield<\/th><td class='"+(i.oneYearYield>0?"text-increase":i.oneYearYield<0?"text-decrease":"")+"'>"+(i.oneYearYield==0?"":formatNumber(i.oneYearYield,2,!1)+"%")+"<\/td><\/tr>");u.eps==!0&&(r+="<tr><th>EPS<\/th><td>"+(i.eps==0?"":formatNumber(i.eps,2,!1)+" <span class='text-primary'>(<abbr title='Fiscal Year'>FY:<\/abbr> "+i.epsFY+(i.epsQuarter==5||i.epsQuarter==0?"":", <abbr title='Quarter'>Q:<\/abbr> "+i.epsQuarter)+")<\/span>")+"<\/td><\/tr>");u.ltp==!0&&(r+="<tr><th>P/E Ratio<\/th><td>"+(i.peRatio==0?"":formatNumber(i.peRatio,4,!0))+"<\/td><\/tr>");u.dividend==!0&&(r+="<tr><th>% Dividend<\/th><td>"+(i.percentCash==0?"":formatNumber(i.percentCash,4,!0)+"% <span class='text-primary'>(<abbr title='Fiscal Year'>FY:<\/abbr> "+i.cashFY+")<\/span>")+"<\/td><\/tr>",r+="<tr><th>% Bonus<\/th><td>"+(i.percentBonus==0?"":formatNumber(i.percentBonus,4,!0)+"% <span class='text-primary'>(<abbr title='Fiscal Year'>FY:<\/abbr> "+i.bonusFY+")<\/span>")+"<\/td><\/tr>",r+="<tr><th>Right Share<\/th><td>"+(i.rightShare==""?"":i.rightShare+" <span class='text-primary'>(<abbr title='Fiscal Year'>FY:<\/abbr> "+i.rightFY+")<\/span><\/td><\/tr>"));u.ltp==!0&&(r+="<tr><th>Market Cap.<\/th><td>"+(i.marketCap==0?"":formatNumber(i.marketCap,2,!1))+"<\/td><\/tr>");r+="<\/table>";r+="<a title='View more detail' class='btn btn-primary btn-xs btn-block' target='_blank' href='/CompanyDetail.aspx?symbol="+i.symbol+"'>View More<\/a>";s=n.attr("aria-describedby");r+="<button type='button' title='Close' class='btn btn-danger btn-xs btn-block' onclick='Popover.dismissPopover(this);'>Close<\/button>";e=$("#"+s);e.find(".popover-title").html(o);e.find(".popover-content").html(r);$("a[data-symbol='"+t+"']").each(function(){n=$(this);n.attr("data-original-title",o);n.attr("data-content",r);n.attr("data-loaded","true").attr("data-loading","false")})}},error:function(n,t,i){console.log("Error on loading company summary: "+i)}})}},function(n){n(".dropdown input").on("click",function(n){n.stopPropagation()});n("body").on("click",".ui-autocomplete",function(n){n.stopPropagation()});n("[data-trigger='broker-floorsheet']").on("click",function(){var t=n(this),i=n(t.data("source")).val();window.location="/BrokerFloorsheet.aspx?code="+i});n("[data-trigger='company-detail']").on("click",function(){var t=n(this).siblings("autosuggest").eq(0).find("input[type='text']:eq(0)").val();t!=""&&(window.location="/CompanyDetail.aspx?symbol="+t)});n("[data-live='index-slider']").on("click","[data-nav]",function(){var r=n(this),t=r.closest("ul"),u=r.data("nav"),i=u=="left"?t.find(".list-item:first()"):t.find(".list-item:last()");i.remove();u=="left"?t.append(i):i.insertAfter(".list-sliding-nav")});n("a[data-double-url='true']").on("click",function(){var t,i,r;t=n(this);i=t.attr("data-url1");r=t.attr("data-url2");n("<a>").attr("href",r).attr("target","_blank")[0].click();window.location=i})}(jQuery);$(document).ready(function(){Popover.registerPopover()}),function(n){n.fn.appendNews=function(t){var e=n(this),r="",u,f,i;switch(t.newsType){case"large":r="media-news media-news-lg";break;case"medium":r="media-news media-news-md";break;case"small":r="media-news media-news-sm";break;case"extraSmall":r="media-news media-news-xs";break;case"flatLarge":r="media-news media-news-lg alt"}u="";switch(t.imageAlign){case"block":u="media-wrap";break;case"left":u="media-wrap media-left";break;case"right":u="media-wrap media-right"}f="/NewsDetail.aspx?newsID="+t.news.newsID;i="";i+="<div class='"+r+"'>";i+="<div class='"+u+"'>";i+="<a  href='"+f+"'><img src='"+t.news.imagePath+"' alt='"+t.news.newsTitle+"' /><\/a>";i+="<\/div>";i+="<div class='"+(t.floatingHeadline?"media-body-float":"media-body")+"'>";i+="<h4 class='media-title'><a  href='"+f+"'>"+t.news.newsTitle+"<\/a><\/h4>";i+="<span class='media-label'>"+n.datepicker.formatDate("M dd, yy",new Date(t.news.newsDateAD))+"<\/span>";t.showOverview&&(i+="<div class='media-content'>"+t.news.newsOverview+"<\/div>");i+="<\/div>";i+="<\/div>";e.append(i)};n("[data-trigger='news-category']").on("change",function(){var t=n(this);window.location="/NewsList.aspx?id="+t.val()});n.fn.appendNewsBlockOne=function(t){var u=n(this),r,i;r=n("<div class='row'><\/div>");i=n("<div class='col-sm-6'><\/div>");u.append(r);r.append(i);i.appendNews({newsType:"medium",imageAlign:"block",news:t[0],floatingHeadline:!1,showOverview:!0});i=n("<div class='col-sm-6'><\/div>");r.append(i);n.each(t,function(t){t!=0&&(t==1&&(addRow=!0,r=n("<div class='row'><\/div>"),i.append(r)),i=n("<div class='col-lg-12'><\/div>"),addRow?r.append(i):u.append(i),i.appendNews({newsType:"extraSmall",imageAlign:"left",news:this,floatingHeadline:!1,showOverview:!1}))})};n.fn.appendNewsBlockTwo=function(t){var u=n(this),r,i;n.each(t,function(t){t%2==0&&(addRow=!0,r=n("<div class='row'><\/div>"),u.append(r));i=n("<div class='col-sm-6'><\/div>");addRow?r.append(i):u.append(i);t<=1?(newsType="small",imageAlign="block",showOverview=!0):(newsType="extraSmall",imageAlign="left",showOverview=!1);i.appendNews({newsType:newsType,imageAlign:imageAlign,news:this,floatingHeadline:!1,showOverview:showOverview})})};n.fn.appendNewsBlockThree=function(t){var r=n(this),u,i,f=r.find(".media-news").length;n.each(t,function(){f%2==0?(i=n("<div class='row'><\/div>"),r.append(i)):i=r.find(".row").last();u=n("<div class='col-sm-6'><\/div>");i.append(u);u.appendNews({newsType:"medium",imageAlign:"block",news:this,floatingHeadline:!1,showOverview:!1});f++})};n.fn.getNews=function(){var t=n(this),r=t.data("load"),u=t.data("loading"),h=t.data("target"),i=t.data("page"),c=t.data("page-size"),e=t.data("target-more"),o=t.data("popular"),s=t.data("filter-symbol"),f=t.data("filter-news-category"),l=t.data("include-featured");u!=""?t.button("loading"):showProcessing();n.ajax({url:"/handlers/webrequesthandler.ashx?type=get_news",type:"GET",data:{newsID:0,newsCategoryID:f==""?0:n(f).val(),symbol:s==""?"":n(s).val(),page:i==-1?1:i+1,pageSize:c,popular:o,includeFeatured:l},dataType:"json",success:function(s){var c=n(h);if(i==-1&&c.empty(),s!=null&&s.length>0)r=="news-block-two"?c.appendNewsBlockTwo(s):r=="news-block-one"?c.appendNewsBlockOne(s):r=="news-block-three"&&c.appendNewsBlockThree(s),i!=-1&&t.data("page",i+1),e!=""&&n(e).attr("href","/NewsList.aspx?id="+f+(o?"&popular=true":"&popular=false"));else c.append("<div class='panel panel-default'><div class='panel-body'>Could not find news matching the search criteria<\/div><\/div>");u!=""?t.button("reset"):hideProcessing();Popover.registerPopover()},error:function(n,i,r){console.log(r);u!=""?t.button("reset"):hideProcessing()}})};n("a[data-load^='news-block']").on("click",function(){var t=n(this);t.getNews()});n("select[data-load^='news-block']").on("change",function(){var t=n(this);t.getNews()})}(jQuery),function(n){n.fn.appendAnnouncement=function(t){var r=n(this),i="";i+="<div class='media'>";i+="<div class='pull-left text-center'>";i+="<small class='text-muted'>"+n.datepicker.formatDate("M dd, yy",new Date(t.announcementDateAD))+"<\/small>";i+="<a  href='/AnnouncementDetail.aspx?id="+t.announcementID+"&ntf=true'>";i+="<span class='icon-stack icon-1x'>";i+="<i class='icon-stack-base icon-circle icon-1x text-primary'><\/i>";i+="<i class='icon-file icon-1x icon-light'><\/i>";i+="<\/span>";i+="<\/a>";i+="<\/div>";i+="<div class='media-body'>";i+="<a  href='/AnnouncementDetail.aspx?id="+t.announcementID+"'>"+t.announcementDetail+"<\/a>";i+="<\/div>";i+="<\/div>";r.append(i)};n("select[data-trigger='announcement-summary']").on("change",function(){var t=n(this),i=n(t.data("source")).find("li.active>a").data("type");window.location="/AnnouncementSummary.aspx?actType="+i+"&fiscalYear="+t.val()});n("a[data-trigger='announcement-summary']").on("click",function(){var t=n(this),i=n(t.data("source")).find("li.active>a").data("type");window.location="/AnnouncementSummary.aspx?actType="+i+"&fiscalYear="});n("[data-load='announcements']").on("click",function(){var t=n(this),f=t.data("page"),o=t.data("page-size"),i=t.data("filter-symbol"),r=t.data("filter-sector"),u=t.data("filter-fiscal-year"),e=t.data("loading-text");e!=""?t.button("loading"):showProcessing();n.ajax({url:"/handlers/webrequesthandler.ashx?type=get_announcements",type:"GET",data:{symbol:i==""?"":i.indexOf("#")==0||i.indexOf(".")==0?n(i).val():i,sectorID:r==""?0:r.indexOf("#")==0||r.indexOf(".")==0?n(r).val():r,fiscalYear:u==""?"":u.indexOf("#")==0||u.indexOf(".")==0?n(u).val():u,pageNumber:f==0?1:f+1,pageSize:o},dataType:"json",success:function(i){if(i!=null&&i.length>0){var r=n(t.data("target"));n.each(i,function(){r.appendAnnouncement({announcementID:this.announcementID,announcementDetail:this.announcementDetail,announcementDateAD:this.announcementDateAD})});f!=0&&t.data("page",f+1)}e!=""?t.button("reset"):hideProcessing()},error:function(n,i,r){console.log(r);e!=""?t.button("reset"):hideProcessing()}})});n("[data-load='company-reports']").on("click",function(){var t=n(this).button("loading"),i=t.data("page");n.ajax({url:"/handlers/webrequesthandler.ashx?type=get_company_reports",type:"GET",data:{symbol:n(t.data("filter-symbol")).val(),sectorID:n(t.data("filter-sector")).val(),fiscalYear:n(t.data("filter-fiscal-year")).val(),pageNumber:i+1,pageSize:50,reportType:t.data("filter-report-type")},dataType:"json",success:function(r){if(r!=null&&r.length>0){var u=n(t.data("target"));n.each(r,function(){u.appendAnnouncement({announcementID:this.announcementID,announcementDetail:this.announcementDetail,announcementDateAD:this.announcementDateAD})});t.data("page",i+1)}t.button("reset")},error:function(n,i,r){console.log(r);t.button("reset")}})})}(jQuery)